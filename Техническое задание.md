# Название и краткое описание проекта
**trex-budget-bot** - Telegram-bot для учета ежедневных трат.

## Описание идеи и цель проекта
Данный бот решает проблему фиксирование ежедневных трат, через простые команды в приложении Telegram.
**Цель** - увидеть траты по категориям за определенные периоды. Это позволит составить семейный бюджет и вести личные финансы в осознанном виде.
**Целевая аудитория** - любой пользователь Telegram, который хочет поставить свои траты под контроль.

## Функциональность (MVP)
Базовые функции.
- **Стартовое меню**. Краткое описание бота, вывод стартовых команд.
- **Помощь**. Подробное описание всех команд.
- **Добавление расхода**. Добавление расхода.
- **Категории расходов**. Вывод списка категорий, и возможность переименовать категорию.
	- Переименование категории.
	- Установка псевдонима категории.
- **Итоги расходов**.
	- Текущие расходы, без разбиения по категориям, за текущий день, за текущую неделю, за текущий месяц. 
	- Текущие расходы за день, по категориям, с сортировкой по убыванию.
	- Текущие расходы за неделю, по категориям, с сортировкой по убыванию.
	- Текущие расходы за месяц, по категориям, с сортировкой по убыванию.

Идеи для расширения функционала.
- Добавить функционал бюджета для категориям. Возможность задать бюджет на месяц, для конкретной категории.
- Разделить категории на регулярные и не регулярные траты.
- Добавить возможность работать с записями трат, выводить список записей, удалять записи.
- Добавить возможность выгружать таблицу трат в google sheets.

## Команды бота
1. **/start**, начало работы и стартовое меню.                   Содержит краткое описание и набор команд.
2. **/addCategory**, добавление новой категории.                   После добавления, будет предложено ввести    псевдоним для категории. Псевдоним это короткое название категории. Например: для категории Продукты, псевдоним: еда Псевдоним можно не заполнять, но тогда при добавлении нового расхода нужно ввести точное имя категории с учетом регистра. Допустимо: Для имени любой набор из символов с максимальной длиной 255 символов Для псевдонима любой набор из символов без пробелов
3. **/listCategories**, Вывод списка категорий.  
    Переименовать категорию можно через вывод всех категорий. После переименования категории будет предложено заполнить псевдоним.
4. **/addExpense**, добавление расхода. 
    - Формат {Сумма} {Категория} [Описание]    
    - {Сумма} Обязательно для заполнения        
	    - Допустимо:            
	    - 100            
	    - 100.99            
	    - 100,99    
    - {Категория} Обязательно для заполнения        
	    - Допустимо:            
	    - Полное имя категории с учетом регистра, например "Продукты" Псевдоним категории, если заполнен, например "еда"
	- [Описание] Не обязательно для заполнения        
    - Допустимо:            
	    - Любой набор из символов с максимальной длиной 255 символов
5. **/listCurrentExpense**
    Вывод списка итогов без категорий.    
    за день, неделю, месяц.
6. **/detailedRecordsForDay**  
    Вывод итогов по категориям за текущий день.
    Сортировка по убыванию.
7. **/detailedRecordsForWeek**  
    Вывод итогов по категориям за текущую неделю.    
    Сортировка по убыванию.
8. **/detailedRecordsForMonth**  
    Вывод итогов по категориям за текущий месяц.    
    Сортировка по убыванию.

## Данные БД
- **Сущности**
	- Expense
		- amount, сумма
		- category, категория
		- date, дата и время операции
		- description, описание
	- Category
		- name, имя
		- alias, псевдоним
	- User
		- chatId, уникальный идентификатор пользователя
		- state, текущее состояние
		- updateId, вспомогательное поля для обновления сущности.
- **База данных**
	- PostgreSql
	- Опционально Sql Lite.

## Стек технологий
- Java 21
- Spring boot 3
- TelegramBots API
- PostgreSql
- Docker
- Docker compose

## Архитектура приложения
- Бот будет работать в режиме Long Polling: приложение при старте регистрируется через API Telegram и периодически опрашивает сервер на наличие новых сообщений.
- **Обработка команд.** Команды обрабатываются через паттерн Command. Каждая команда будет представлена в виде отдельного класса. Что в дальнейшем позволит легко добавлять новые классы.
- **Слой логики.** В services будут представлены классы и методы бизнес-логики. Например для добавления расхода. Для получения итоговых данных за период.
- **Слой данных.** В repository будут представлены классы и методы для получения данных.
- **Пользователи.** Пользователи будут сохраняться в отдельной таблице.
- **Внешние API.** Как дополнительный функционал, реализовать отправку в google sheets.
- **Логирование и обработка ошибок.**

## Развертывание
**Среда разработки**. Разработка и тестирование бота происходит при помощи библиотеки TelegramBots, LongPolling JUnit. 

**Деплой**. Деплой бота будет выполнен на личном VPS сервере, в Docker-контейнере. Бот должен быть доступен 24/7.

